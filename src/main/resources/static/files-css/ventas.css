/* ==========================================================
   VENTAS.CSS (UNIFICADO + RESPONSIVE COMO ENTREGAS)
   - Arregla spacing (Cliente/Total/Estado) centrando celdas
   - Acciones con columna más ancha y botones “parejos”
   - Responsive igual a entregas (<=700px en “tarjetas”)
   - Tooltip en hover para acciones deshabilitadas (anulada/entregada)
   - Tom Select del cliente con el MISMO tamaño que los otros inputs
   ========================================================== */

/* ====== Variables Base ====== */
:root{
  --gap: 14px;
  --radius: 12px;
  --card-pad: 14px 16px;
  --shadow: 0 1px 2px rgba(0,0,0,.06);

  --c-text: #212529;
  --c-muted: #6b7280;
  --c-border: #e9ecef;

  --c-primary: #1c7ed6;
  --c-primary-600: #1864ab;

  --c-red: #f84052;
  --c-red-700: #c92a2a;
}

*{ box-sizing:border-box; }

/* ====== Layout Base ====== */
.page{
  max-width:none;
  width:100%;
  padding:24px;
  box-sizing:border-box;
}

.page-head{
  display:flex;
  align-items:center;
  margin-bottom:12px;
  gap:35px;
}
.page-head h1{ margin-left:15px; }

/* ====== Cards ====== */
.card{
  background:#fff;
  border-radius:var(--radius);
  padding:var(--card-pad);
  box-shadow:var(--shadow);
  margin:10px 0 14px 0;
}

/* ====== Filtros (igual a entregas) ====== */
.filters.card{
  margin-bottom:20px;
  padding:var(--card-pad);
}

.filters .row{
  display:flex;
  flex-wrap:wrap;
  align-items:flex-end;
  gap:12px;
}

.filters label{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:.95rem;
  color:#555;
  min-width:150px;
  font-weight:normal;
  text-align:left;
}

/* Inputs dentro de filtros */
.filters input[type="text"],
.filters input[type="number"],
.filters input[type="date"],
.filters select{
  padding:8px 10px;
  border:1px solid #dfe3e6;
  border-radius:8px;
  background:#fff;
  width:100%;
  min-width:140px;
  font-size:.95rem;
  color:#495057;
}

.filters input:focus,
.filters select:focus{
  border-color:#3b82f6;
  outline:none;
}

/* ====== Botones (base) ====== */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  padding:8px 12px;
  border-radius:8px;
  border:1px solid transparent;
  font-weight:500;
  cursor:pointer;
  text-decoration:none;
  line-height:1;
  transition:background .15s, border-color .15s, transform .02s;
}
.btn:active{ transform:translateY(1px); }

.btn.primary{ background:var(--c-primary); color:#fff; }
.btn.primary:hover{ background:var(--c-primary-600); }

.btn.outline{ background:#fff; color:var(--c-text); border-color:#ced4da; }
.btn.outline:hover{ background:#f1f3f5; }

.btn.danger{ background:var(--c-red); color:#fff; }
.btn.danger:hover{ background:var(--c-red-700); }

a.btn{ text-decoration:none; }

/* Acciones deshabilitadas (muted) */
.btn.muted,
a.btn.muted{
  opacity:.45;
  filter:grayscale(1);
  cursor:not-allowed;
}
.btn.muted:hover,
a.btn.muted:hover{ transform:none; }

/* ====== Wrapper “tabla” (scroll horizontal si hace falta) ====== */
.tabla{
  width:100%;
  display:block;
  overflow-x:auto;
}

/* ==========================================================
   LISTADO VENTAS (desktop) — MISMO CRITERIO QUE ENTREGAS
   ========================================================== */

/* Fila tipo tabla */
#lista-ventas .fila{
  display:grid;
  /* Fecha | Cliente | Total | Estado | Acciones */
  grid-template-columns: 130px 2fr .9fr 1.3fr 1.6fr; /* <- Acciones más ancha */
  align-items:center;
  gap:10px;
  background:#fff;
  border-radius:10px;
  padding:10px 14px;
  box-shadow:var(--shadow);
  border:1px solid #f1f3f5;
}

/* Encabezado */
#lista-ventas .fila.encabezado{
  background:#f1f3f5;
  font-weight:800;
  box-shadow:none;
  position:sticky;
  top:0;
  z-index:1;
  border:1px solid var(--c-border);
  font-size:1rem;
  color:var(--c-text);
}

/* Centrado TOTAL (esto arregla el “espacio enorme” visual) */
#lista-ventas .fila > div{
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  width:100%;
}

/* Zebra + hover */
#lista-ventas .fila:not(.encabezado):nth-child(odd){ background:#fcfcfd; }
#lista-ventas .fila:not(.encabezado):hover{ box-shadow:0 6px 16px rgba(0,0,0,.06); }

/* Acciones: que queden “parejas” y prolijas */
#lista-ventas .acciones{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:center;
  align-content:center;
}

/* Botones de acciones cuadrados (como en tus capturas) */
#lista-ventas .acciones .btn{
  width:44px;
  height:36px;
  padding:0;
}

/* ====== Pills ====== */
.pill{
  padding:4px 10px;
  border-radius:999px;
  font-size:.85rem;
  font-weight:700;
  display:inline-block;
  border:1px solid transparent;
}
.pill.pending   { background:#fff4d6; color:#7a5600; border-color:#ffe8a1; }
.pill.partial   { background:#e7f1ff; color:#1b4fa3; border-color:#cfe2ff; }
.pill.completed { background:#e8f7ee; color:#146c2e; border-color:#a7f3d0; }
.pill.cancelled { background:#fecaca; color:#7f1d1d; border-color:#fca5a5; }

/* ====== Tooltips en hover para acciones deshabilitadas ======
   (Sirve para “Entrega anulada / Venta anulada / No editable…”) */
#lista-ventas .acciones button:disabled{
  opacity:.55;
  cursor:not-allowed;
  pointer-events:auto; /* permite hover para tooltip */
}

/* Tooltip (usa el title) */
#lista-ventas .acciones button[disabled][title]{
  position:relative;
}
#lista-ventas .acciones button[disabled][title]:hover::after{
  content:attr(title);
  position:absolute;
  bottom:calc(100% + 8px);
  left:50%;
  transform:translateX(-50%);
  background:#111827;
  color:#fff;
  font-size:.78rem;
  padding:6px 8px;
  border-radius:8px;
  white-space:nowrap;
  z-index:9999;
  box-shadow:0 6px 18px rgba(0,0,0,.18);
}
#lista-ventas .acciones button[disabled][title]:hover::before{
  content:"";
  position:absolute;
  bottom:calc(100% + 2px);
  left:50%;
  transform:translateX(-50%);
  border:6px solid transparent;
  border-top-color:#111827;
  z-index:9999;
}

/* ==========================================================
   Detalle / formularios (se usan en ver-venta / crear-venta)
   ========================================================== */

.detail-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
  gap:10px 16px;
}

.muted{ color:var(--c-muted); }
.detail-grid .muted{ color:var(--c-muted); }

.form-page.narrow{ max-width:900px; margin:0 auto; }
.form-page .card{
  background:#fff;
  padding:16px;
  border-radius:12px;
  box-shadow:var(--shadow);
}
.form-page .grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.form-page label{ display:block; font-size:.9rem; color:#444; margin-bottom:6px; }
.form-page input[type="date"],
.form-page input[type="text"],
.form-page input[type="number"],
.form-page select{
  width:100%;
  padding:8px 10px;
  border:1px solid #dfe3e6;
  border-radius:8px;
  background:#fff;
}

.subhead{ margin:14px 0 8px; }
.form-actions{ margin-top:16px; display:flex; gap:10px; justify-content:flex-start; }

.subtotales{ display:flex; justify-content:flex-end; margin:10px 0; font-size:1.1rem; }
.subtotales strong{ font-size:1.25rem; }

.hint{ color:var(--c-muted); font-size:.85rem; }
.row-error{ outline:2px solid #dc3545; border-radius:8px; }

/* Inputs con error */
.input-error{
  border-color: var(--c-red) !important;
  box-shadow: 0 0 0 1px rgba(248,64,82,.25);
  background: rgba(248,64,82,.02);
}
.field-hint.error{
  color: var(--c-red);
  font-size: .85rem;
  margin-top: 4px;
  display: block;
}

button:disabled{ opacity:.55; cursor:not-allowed; }

/* ==========================================================
   Autocomplete (si lo usan en crear/editar)
   ========================================================== */
.autocomplete-wrapper{ position:relative; width:100%; }
.autocomplete-wrapper input[type="text"]{ width:100%; }

.autocomplete-list{
  position:absolute;
  top:100%; left:0; right:0;
  background:#fff;
  border:1px solid #dfe3e6;
  border-top:none;
  border-radius:0 0 8px 8px;
  max-height:200px;
  overflow-y:auto;
  z-index:9999;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
  display:none;
}
.autocomplete-list.active{ display:block; }
.autocomplete-list div{
  padding:10px 12px;
  cursor:pointer;
  border-bottom:1px solid #f1f3f5;
  font-size:.9rem;
  color:#333;
}
.autocomplete-list div:hover{ background:#f0f7ff; color:var(--c-primary); }

input:disabled{
  background-color:#f8f9fa !important;
  color:#6c757d;
  cursor:not-allowed;
  border-color:#e9ecef;
}


    .ts-control input {
        font-size: 1rem !important;
        color: inherit;
        background: transparent !important;
        margin: 0 !important;
        padding: 0 !important;
        height: 100% !important;
        width: 100% !important;
        position: relative;
        top: 0;
  
    }

    /* 4. OCULTAR EL ITEM AL ESCRIBIR */
    .ts-wrapper.single.input-active .ts-control .item {
        display: none !important;
    }

  
    .ts-wrapper.focus .ts-control {
        outline: 0;
        border-radius: 8px;
    }

    /* 6. MENÚ DESPLEGABLE */
    .ts-dropdown {
        border: 1px solid #ced4da;
        border-radius: 6px;
        margin-top: 4px;
        box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        z-index: 9999;
        background: #fff;
        width: 200px !important; 
    }

    /* 7. OPCIONES DEL MENÚ */
    .ts-dropdown .option {
        padding: 8px 12px;
        cursor: pointer;
    }

    .ts-dropdown .active {
        background-color: #e9ecef;
        color: #000;
    }

    /* 8. FLECHITA */
    .ts-wrapper.single .ts-control::after {
        border-color: #6c757d transparent transparent transparent !important;
        border-width: 5px 5px 0 5px !important;
        right: 10px !important;
    }

    .ts-dropdown, .ts-control, .ts-control input {
    color: #555 !important;
    font-family: inherit;
    font-size: 16px !important;
    line-height: 18px;
    }
/* ==========================================================
   RESPONSIVE (idéntico criterio que entregas)
   ========================================================== */
@media (max-width:1100px){
  .page{ padding:16px; }
  #lista-ventas .fila{ font-size:.95rem; }
}

@media (max-width:900px){
  .filters .row{ gap:8px; }

  #lista-ventas .fila{
    grid-template-columns: 110px 2fr .9fr 1.2fr 1.4fr;
    padding:10px 10px;
  }

  /* En pantallas medianas, cliente a la izquierda (como entregas) */
  #lista-ventas .fila > div:nth-child(2){
    justify-content:flex-start;
    text-align:left;
  }

  .form-page .grid{ grid-template-columns:1fr; }
}

@media (max-width:700px){
  .page{ padding:12px; }

  .page-head{
    flex-direction:column;
    align-items:flex-start;
    gap:8px;
  }
  .page-head h1{ margin-left:0; }

  /* Ocultar encabezado (como entregas) */
  #lista-ventas .fila.encabezado{ display:none; }

  /* Tarjeta */
  #lista-ventas .fila{
    grid-template-columns: 1fr 1fr;
    grid-template-rows:auto auto auto;
    grid-template-areas:
      "fecha estado"
      "cliente cliente"
      "total acciones";
    align-items:flex-start;
    padding:10px 12px;
  }

  #lista-ventas .fila > div{ width:100%; }

  /* Mapeo por orden: 1 Fecha, 2 Cliente, 3 Total, 4 Estado, 5 Acciones */
  #lista-ventas .fila > div:nth-child(1){ grid-area:fecha; justify-content:flex-start; }
  #lista-ventas .fila > div:nth-child(2){ grid-area:cliente; justify-content:flex-start; text-align:left; }
  #lista-ventas .fila > div:nth-child(3){ grid-area:total; justify-content:flex-start; }
  #lista-ventas .fila > div:nth-child(4){ grid-area:estado; justify-content:flex-end; }
  #lista-ventas .fila > div:nth-child(5){ grid-area:acciones; justify-content:flex-end; }

  #lista-ventas .acciones{ justify-content:flex-end; }
}

/* Botón chiquito reutilizable */
.btn.btn-small{
  padding:6px 10px;
  font-size:.85rem;
}

.fila{
    display: grid;
    align-items: center;
    grid-template-columns: repeat(6, 1fr);
    padding: 10px;
    border-bottom: 1px solid #ccc;
    text-align: center;
    gap: 10px;
}