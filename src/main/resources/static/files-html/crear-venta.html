<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>üìà - Nueva venta</title>
  <link rel="stylesheet" href="../files-css/style.css" />
  <link rel="stylesheet" href="../files-css/ventas.css" />
  <link rel="stylesheet" href="../files-css/nav.css" />
</head>
<body>

  <div id="app-header"></div>

<main class="page form-page narrow">
  <div class="page-head">
    <h1>Nueva venta</h1>
  </div>

  <section class="card">
    <div class="grid">
      <div>
        <label>Fecha</label>
        <input id="fecha" type="date" required>
      </div>
      
      <div>
        <label>Cliente</label>
        <div class="autocomplete-wrapper" id="ac-cliente-wrapper">
          <input type="text" id="cliente-search" placeholder="Buscar cliente..." autocomplete="off">
          <input type="hidden" id="cliente">
          <div class="autocomplete-list"></div>
        </div>
      </div>

      <div>
        <label for="orderSelect">Presupuesto (opcional)</label>
        <div style="display:flex; gap:8px; align-items:center;">
          <select id="orderSelect">
            <option value="">‚Äî</option>
          </select>
          <button id="btnClearOrder" class="btn outline" style="display:none;">Limpiar</button>
        </div>
        <small class="hint">
          Solo se listan presupuestos con unidades pendientes.
        </small>
      </div>
    </div>

    <h3 class="subhead">√çtems</h3>
    <div class="tabla" id="items">
      <div class="fila encabezado">
        <div>Material</div>
        <div>Dep√≥sito</div>
        <div>Cantidad</div>
        <div>Precio</div>
        <div>Subtotal</div>
        <div>Quitar</div>
      </div>
      </div>
    <div class="form-actions">
      <button class="btn outline" id="btnAdd">+ Agregar √≠tem</button>
    </div>

    <div class="subtotales">
      <div>Total: <strong id="total">$ 0,00</strong></div>
    </div>

    <h3 class="subhead">Pago inicial (opcional)</h3>
    <div class="grid">
      <div>
        <label>Importe</label>
        <input id="pagoImporte" type="number" min="0" step="1">
      </div>
      <div>
        <label>Fecha</label>
        <input id="pagoFecha" type="date">
      </div>
      <div>
        <label>M√©todo</label>
        <select id="pagoMetodo">
          <option value="">Sin pago</option>
          <option>Efectivo</option>
          <option>Transferencia</option>
          <option>D√©bito Mastercard</option>
          <option>Cr√©dito Visa</option>
        </select>
      </div>
    </div>

    <div class="form-actions">
      <button class="btn primary" id="btnGuardar">Crear venta</button>
      <a class="btn outline" href="../files-html/ventas.html">Cancelar</a>
    </div>
  </section>
</main>

<script src="../files-js/core/api.js"></script>
<script>window.api.setBaseUrl('http://localhost:8088');</script>
<script src="../files-js/header.js"></script>
<script src="../files-js/menu-guard.js"></script>
<script src="../files-js/crear-venta.js"></script>
</body>
</html>