<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>✏️ - Editar presupuesto</title>
  <link rel="stylesheet" href="../files-css/style.css"/>
  <link rel="stylesheet" href="../files-css/pedidos.css"/>
  <link rel="stylesheet" href="../files-css/crear-pedido.css"/> 
  <link rel="stylesheet" href="../files-css/nav.css"/>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

  <div id="app-header"></div>

  <main class="page form-page narrow">
    <div class="page-head" style="display: block;">
      <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 8px;">
        <h1>Editar presupuesto <span id="orderIdDisplay" style="color:#666; font-weight:400; font-size: 0.9em;"></span></h1>
      </div>
      <p style="color: #666; font-size: 0.95rem; margin: 0 0 15px 5px; max-width: 700px; line-height: 1.4;">
        * Modificando un presupuesto existente. Los cambios no afectan el stock hasta que se facture.
      </p>
    </div>

    <section class="card">
      <form id="form-editar-pedido">
        
        <div class="grid">
          <div>
            <label>Cliente</label>
            <div class="autocomplete-wrapper" id="ac-cliente-wrapper">
              <input type="text" id="cliente-search" placeholder="Buscar cliente..." autocomplete="off">
              <input type="hidden" id="cliente">
              <div class="autocomplete-list"></div>
            </div>
          </div>
          
          <div>
            <label for="fecha-entrega">Vencimiento / Entrega</label>
            <input type="date" id="fecha-entrega" required />
          </div>
        </div>
<br>
        <hr class="hr">
<br>
        <h3 class="subhead">Ítems del presupuesto</h3>
        
        <div class="tabla" id="items">
          <div class="fila encabezado">
            <div>Material</div>
            <div>Cantidad</div>
            <div>Precio Unit.</div>
            <div>Subtotal</div>
            <div>Quitar</div>
          </div>
          </div>

        <div class="form-actions" style="margin-top: 12px;">
          <button class="btn outline" id="btnAdd">+ Agregar ítem</button>
        </div>

        <div class="subtotales">
          <div>Total Estimado: <strong id="total">$ 0,00</strong></div>
        </div>

        <div class="form-actions main-actions">
          <button class="btn primary" id="btnGuardar">Guardar cambios</button>
          <a class="btn outline" href="../files-html/pedidos.html">Cancelar</a>
        </div>

      </form>
    </section>
  </main>

  <script src="../files-js/core/api.js"></script>
  <script>window.api.setBaseUrl('http://localhost:8088');</script>
  <script src="../files-js/header.js"></script>
  <script src="../files-js/menu-guard.js"></script>
  <script src="../files-js/editar-pedido.js"></script>
</body>
</html>