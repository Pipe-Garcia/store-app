<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ðŸ“¦ Materiales</title>
  <link rel="stylesheet" href="../files-css/style.css"/>
  <link rel="stylesheet" href="../files-css/materiales.css"/>
  <link rel="stylesheet" href="../files-css/nav.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <div id="app-header"></div>

  <main class="page">
    <div class="encabezado-lista-materiales">
      <h1>Materiales</h1>
      <div class="enc-actions">
        <a class="btn primary" href="../files-html/crear-material.html">+ Nuevo material</a>
        <a class="btn outline btn-edit-stock" style="border: 0.6px solid black;" href="../files-html/editar-stock.html">Editar stock</a>
        <a class="btn outline" style="border: 0.6px solid black;" href="../files-html/familias.html">Familias</a>
        <button class="btn outline" id="btn-export-materials" style="border-color: black;">â¬‡ Exportar</button>
      </div>
    </div>
    <hr><br>

      <section class="filtros card">
        <div class="row">

          <label>Familia
            <select id="f_family" class="in">
              <option value="">Familia (todas)</option>
            </select>
          </label>

          <label>CÃ³digo
            <input id="f_code" class="in" placeholder="CÃ³digo interno">
          </label>

          <label>Nombre
            <input id="f_name" class="in" placeholder="Nombre">
          </label>

          <label>Precio MÃ­n.
            <input id="f_min" class="in" type="number" min="0" step="1" placeholder="ARS">
          </label>

          <label>Precio MÃ¡x.
            <input id="f_max" class="in" type="number" min="0" step="1" placeholder="ARS">
          </label>

          <label>Estado
            <select id="f_status" class="in" title="Estado del material">
              <option value="ACTIVE" selected>Activos</option>
              <option value="INACTIVE">Inactivos</option>
              <option value="ALL">Todos</option>
            </select>
          </label>

          <label>Stock
            <select id="f_stock" class="in" title="Filtro de stock">
              <option value="">Stock (todos)</option>
              <option value="IN_STOCK">Con stock (&gt; 0)</option>
              <option value="OUT_OF_STOCK">Sin stock (= 0)</option>
              <option value="LOW">Bajo (â‰¤ 10)</option>
            </select>
          </label>

          <button id="btnLimpiar" class="btn outline">Limpiar</button>

        </div>
      </section>


    <div class="tabla materiales">
      <div class="fila encabezado">
        <div>CÃ³digo</div>
        <div>Nombre</div>
        <div>Marca</div>
        <div>Stock</div>
        <div>Precio</div>
        <div>Estado</div>
        <div>Acciones</div>
      </div>
      <div id="lista-materiales"></div>
    </div>

    <!-- Paginador -->
    <div class="pager">
      <div class="info" id="pg-info"></div>
      <button class="btn" id="pg-prev">Â« Anterior</button>
      <button class="btn" id="pg-next">Siguiente Â»</button>
    </div>
  </main>

  <!-- nÃºcleo + base URL + header -->
  <script src="../files-js/core/api.js"></script>
  <script>window.api.setBaseUrl('http://localhost:8088');</script>
  <script src="../files-js/header.js"></script>
  <script src="../files-js/menu-guard.js"></script>
  <!-- script de la pÃ¡gina -->
  <script type="module" src="../files-js/materiales.js"></script>

  <script>
    document.addEventListener('app:auth-ready', () => {
      const role = document.documentElement.getAttribute('data-role');
      if (role === 'employee') {     
        document.querySelectorAll('.btn-edit-stock').forEach(btn => {
          btn.remove();
        });
      }
    });
  </script>
</body>
</html>
